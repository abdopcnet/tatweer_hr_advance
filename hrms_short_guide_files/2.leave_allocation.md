# Leave Allocation

## Overview
Leave Allocation grants leave days to employees for a specific period.

## Fields

### Basic Information
- `employee` (Link, Required): Employee name
- `leave_type` (Link, Required): Leave Type name
- `from_date` (Date, Required): Allocation start date
- `to_date` (Date, Required): Allocation end date

### Allocation Details
- `new_leaves_allocated` (Float): New days to allocate
- `carry_forward` (Check): Enable carry forward from previous allocation
- `unused_leaves` (Float, Read-only): Carry forward balance (auto-calculated)
- `total_leaves_allocated` (Float, Read-only, Required): Total leaves (unused + new)

### Links
- `leave_policy` (Link, Read-only): Link to Leave Policy
- `leave_policy_assignment` (Link, Read-only): Link to Leave Policy Assignment
- `leave_period` (Link, Read-only): Link to Leave Period

## Workflow

### Step 1: Create Leave Allocation
1. Go to HR → Leave Allocation → New
2. Select `employee`
3. Select `leave_type`
4. Set `from_date` and `to_date`
5. Enter `new_leaves_allocated`

### Step 2: Enable Carry Forward (Optional)
1. Check `carry_forward`
2. System calculates `unused_leaves` from previous allocation
3. `total_leaves_allocated` = `unused_leaves` + `new_leaves_allocated`

### Step 3: Submit
1. Review `total_leaves_allocated`
2. Submit document
3. System creates Leave Ledger Entry

## Calculation
```
total_leaves_allocated = unused_leaves + new_leaves_allocated
```

## Important Notes
- Leave Allocation must be submitted to be effective
- Overlapping allocations are not allowed for same employee and leave_type
- Cannot cancel if linked to Leave Applications
- When creating new allocation with `carry_forward=1`, previous allocation is updated automatically

